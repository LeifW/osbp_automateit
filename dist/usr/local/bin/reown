#!/bin/bash

# +---------------------------------------------------------------------+
# | WARNING: Do NOT edit this file directly or your changes will be     |
# | lost. If you need to change this file, you must incorporate your    |
# | changes into the AutomateIt project that created it. If you don't   |
# | know what this means, please talk to your system administrator.     |
# +---------------------------------------------------------------------+

# SUMMARY: Reown shared files and directories to correct group ownerships.
# ARGUMENTS: Any arguments will cause this to run in quiet mode.

if ! [[ 0 == $UID ]]; then
    sudo $0 $1
    exit $?
fi

if [[ $1 ]]; then
    VERBOSE=n
else
    VERBOSE=y
    echo "# reowning shared files and directories"
fi

wrapper () {
    #ionice -c 2 -n 7 -- nice -n 19 -- "$@"
    nice -n 19 -- "$@"
}

wrapper chgrp -R bridgepdx "/var/www/bridgepdx"*
wrapper find "/var/www/bridgepdx"* -type d -exec chmod g+s {} \;
wrapper chmod -R g+rwX "/var/www/bridgepdx"*
