#! /bin/sh
### BEGIN INIT INFO
# Provides:          iptables
# Required-Start:    networking
# Required-Stop:     networking
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: Activates iptables firewall
### END INIT INFO

# +---------------------------------------------------------------------+
# | WARNING: Do NOT edit this file directly or your changes will be     |
# | lost. If you need to change this file, you must incorporate your    |
# | changes into the AutomateIt project that created it. If you don't   |
# | know what this means, please talk to your system administrator.     |
# +---------------------------------------------------------------------+

PATH=/sbin:/bin:/usr/sbin:/usr/bin
NAME=iptables
SCRIPTNAME=/etc/init.d/$NAME
DESC=firewall

set -e

. /lib/lsb/init-functions

case "$1" in
  start)
  log_daemon_msg "Starting $DESC" $NAME

        . /etc/firewall_rules.sh

        log_end_msg 0
    ;;
  stop)
  log_daemon_msg "Stopping $DESC" $NAME
        iptables -P INPUT ACCEPT
        iptables -P OUTPUT ACCEPT
        iptables -P FORWARD ACCEPT
        iptables -F
        log_end_msg 0
  ;;
  reload|restart|force-reload)
    $0 stop
    sleep 1
    $0 start
  ;;
  *)
    echo "Usage: $SCRIPTNAME {start|stop|restart|reload|force-reload}" >&2
    exit 1
  ;;
esac

exit 0
